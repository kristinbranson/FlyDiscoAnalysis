%Debug_JAABADetect.m 12/16/2016

% %% setup path
% 
% addpath /groups/branson/home/robiea/Code_versioned/Jdetect_github/Jdetect/filehandling/;
% addpath /groups/branson/home/robiea/Code_versioned/Jdetect_github/Jdetect/misc;
% addpath /groups/branson/home/robiea/Code_versioned/Jdetect_github/Jdetect/perframe/;

settingsdir = '/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis/FlyDiscoAnalysis-new/settings';
% change to mine

%% experiment directories
% expdir = '/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/aIPg/20210909T080233_rig1_flyBowl2__20XUASCsChrimsonattp18_SS36564_KS_redonly3times10AND30_080521';
% change to exptdir
expdir = {'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T080233_rig1_flyBowl1__20XUASCsChrimsonattp18_SSempty_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T080233_rig1_flyBowl2__20XUASCsChrimsonattp18_SS36564_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T080233_rig1_flyBowl3__20XUASCsChrimsonattp18_SS79592_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T080233_rig1_flyBowl4__20XUASCsChrimsonattp18_SS81579_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T081543_rig1_flyBowl1__20XUASCsChrimsonattp18_SSempty_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T081543_rig1_flyBowl2__20XUASCsChrimsonattp18_SS36564_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T081543_rig1_flyBowl3__20XUASCsChrimsonattp18_SS79592_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T081543_rig1_flyBowl4__20XUASCsChrimsonattp18_SS81579_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T082846_rig1_flyBowl1__20XUASCsChrimsonattp18_SS76311_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T082846_rig1_flyBowl2__20XUASCsChrimsonattp18_SS76355_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T082846_rig1_flyBowl3__20XUASCsChrimsonattp18_SS76305_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T082846_rig1_flyBowl4__20XUASCsChrimsonattp18_SS75292_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T084147_rig1_flyBowl1__20XUASCsChrimsonattp18_SS76311_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T084147_rig1_flyBowl2__20XUASCsChrimsonattp18_SS76355_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T084147_rig1_flyBowl3__20XUASCsChrimsonattp18_SS76305_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T084147_rig1_flyBowl4__20XUASCsChrimsonattp18_SS75292_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T085503_rig1_flyBowl1__20XUASCsChrimsonattp18_SS76311_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T085503_rig1_flyBowl2__20XUASCsChrimsonattp18_SS76355_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T085503_rig1_flyBowl3__20XUASCsChrimsonattp18_SS76305_KS_redonly3times10AND30_080521',...
'/groups/rubin/home/schretterc/Documents/FlyDiscoAnalysis_ExptsToAnalyze_Test/Newlines_toreprocess/20210909T085503_rig1_flyBowl4__20XUASCsChrimsonattp18_SS75292_KS_redonly3times10AND30_080521'};

%% parameters
analysis_protocol = '20211112_FlyBowlRGBVision_addJAABA';
% change to yours
% analysis_protocol = 'current_non_olympiad_rubin_grooming';
params = {'settingsdir',settingsdir,...
  'analysis_protocol',analysis_protocol};
%%

datalocparamsfilestr = 'dataloc_params.txt';
datalocparamsfile = fullfile(settingsdir,analysis_protocol,datalocparamsfilestr);
dataloc_params = ReadParams(datalocparamsfile);
jaabaclassifierparamsfilestrs = fullfile(settingsdir,analysis_protocol,dataloc_params.jaabaclassifierparamsfilestrs);

jabfiles = textread(jaabaclassifierparamsfilestrs,'%s');

pwdprev = pwd;
jaabadir = fileparts(which('JAABADetect'));
cd(jaabadir);

JAABADetect(expdir,'jabfiles',jabfiles,'forcecompute',false);

cd(pwdprev);