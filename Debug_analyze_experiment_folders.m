% cd FlyDiscoAnalysis
% matlab &
% <Now in Matlab>
%%
modpath
lab_head_last_name = 'branson' ;
do_use_bqueue = true ;    
do_actually_submit_jobs = true ;  

%% set params 

folder_path_from_experiment_index = { '/groups/branson/bransonlab/flydisco_data/VNC_JRC_SS38624_RigA_20210405T131736' ...
                                      '/groups/branson/bransonlab/flydisco_data/VNC_JRC_SS38592_RigD_20210401T143253' } ;
                                  
settings_folder_path = '/groups/branson/home/robiea/flydisco/FlyDiscoAnalysis/settings' ;
analysis_protocol = '20210319_flybubble_LED_testing';

do_force_analysis = true ;    

% analysis_parameters = cell(1, 0) ;

analysis_parameters = {'analysis_protocol',analysis_protocol, ...    
    'doautomaticchecksincoming',true,...
    'doflytracking',true, ...
    'doregistration',true,...
    'doledonoffdetection',true,...
    'dosexclassification',false,...
    'dotrackwings',false,...
    'docomputeperframefeatures',false,...
    'docomputehoghofperframefeatures',false,...
    'dojaabadetect',false,...
    'docomputeperframestats',false,...
    'doplotperframestats',false,...
    'domakectraxresultsmovie',false,...
    'doextradiagnostics',false,...
    'doanalysisprotocol',isunix,...
    'doautomaticcheckscomplete',false};

analyze_experiment_folders(folder_path_from_experiment_index, settings_folder_path, lab_head_last_name, ...
                           do_force_analysis, do_use_bqueue, do_actually_submit_jobs, analysis_parameters) ;